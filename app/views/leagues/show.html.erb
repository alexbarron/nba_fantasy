<h1><%= @league.name %></h1>

<%= link_to "Create Team In This League", new_league_team_path(@league) %>

<% if !current_user.nil? && !!current_user.team %>
  <% if @league == current_user.team.league %>
    <%= link_to "Leave League", leave_league_path(id: current_user.team), method: :post, class: "btn btn-danger btn-sm", data: {confirm: "Are you sure?"} %>
  <% else %>
    <%= link_to "Join League", join_league_path(id: current_user.team, league_id: @league.id), method: :post, class: "btn btn-success btn-sm", data: {confirm: "Are you sure? You will have to leave any other your team is in."} %>
  <% end %>
<% end %>

<h3>Teams</h3>

<% if !!@teams %>
<table class="table table-striped table-condensed">
  <tr>
    <th>Team Name</th>
    <th>Owner</th>
    <th>Score</th>  
    <th>Salary</th>
    <th>Efficiency(Score Per Million)</th>
  </tr>
    <% @teams.each do |team| %>
      <tr>
        <td><%= link_to team.name, team %></td>
        <td><%= team.owner_name %></td>
        <td><%= team.score %></td>
        <td><%= number_to_currency(team.salary, precision: 0) %></td>
        <td><%= team.efficiency %></td>
      </tr>
    <% end %>
</table>

<% else %>
  <p>No teams added yet.</p>
<% end %>


<% if !current_user.nil? && (current_user == @league.user || current_user.admin?) %>
  <%= link_to "Edit League Info", edit_league_path(@league), class: "btn btn-primary" %><br /><br />
  <%= link_to "Delete League", league_path(@league), method: :delete, data: {confirm: "Are you sure?"}, class: "btn btn-danger" %>
<% end %>